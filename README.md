https://www.tianhao.me/posts/rk-camera-capture/

生活中那些安静流淌、不易察觉的诗意总是令人充满好奇。迷上了延时摄影因为它能将漫长的时间压缩成迷人的瞬间，让我们得以用肉眼观察到那些缓慢发生的变化，这本身就像一种时间的魔法。

于是，我翻出了家里那个在抽屉里沉睡了数年的 USB 摄像头，心中涌起一个温柔的念头：我想用它来记录，记录那些被我们匆忙忽略的、生活本身的呼吸。比如阳台上那盆多肉，如何在阳光的亲吻下，用我们看不见的速度悄悄舒展；窗外的云朵，又是如何被无形的手塑造成流动的雕塑；甚至是傍晚时分，夕阳如何在客厅的地板上，一寸寸地拉出长长的、温暖的影子……

项目代码：https://github.com/AndroidOL/camera-capture

## 从“勤奋的笨蛋”到“聪明的懒汉”：一次理念的进化

最开始，我的想法和大多数人一样，简单而直接：写一个脚本，让摄像头化身为一个不知疲倦的“劳动模范”，每分钟准时打卡，忠实地拍下一张照片。当我敲下最后一行代码并成功运行的那一刻，心中充满了小小的成就感。然而，这份喜悦在第二天清晨，当我检视成果时，便迅速被一种混杂着困惑与失望的复杂情绪所取代。

硬盘里，一千四百四十张照片整齐地排列着，它们是我的程序“勤奋”一整天的见证。但我快速滚动预览时，画面却像卡住了一样，静止得令人窒息。尤其是在那漫长的深夜时段，凌晨三点和三点零一分的客厅照片，别说茶几上的灰尘纹丝未动，就连空气本身，似乎都凝固在了那一刻。我忽然意识到，我创造的不是一个记录“变化”的工具，而是一个生产“重复”的工厂。

当我冷静下来，把这笔“数字遗产”量化后，我才真正理解了问题的严重性：

### 惊人的存储消耗：

- **日产量**: 43200 张照片  
- **月产量**: 约 1296000 张照片  
- **年产量**: 超过 473040000 张照片  

按每张照片分辨率 1920\*1080 存储，每张照片占用大小 0.2MB 计算，每天将消耗近 8GB 的存储空间，对于家庭存储而言这并不算什么。但是对于嵌入式设备，ESP32 抑或是 RK 的单板机而言有点超出限制。

### 毁灭性的后期工作：

- **素材筛选**: 为了剪辑出几分钟的精彩视频，需要在数十万张几乎相同的“废片”中大海捞针。  
- **时间成本**: 这哪里是艺术创作，分明是一场能耗尽所有热情的体力劳动。

为了更直观地展示这两种思路的差异，我做了一个简单的对比：

| 特性         | “勤奋的笨蛋”模式         | “聪明的懒汉”模式       |
| ---------- | ----------------- | --------------- |
| **工作原则**   | 无差别、定时记录          | 智能判断、按需记录       |
| **每时照片数量** | 恒定 1800 张         | 几十到几百张不等，视变化而定  |
| **存储友好度**  | 极低，呈线性爆炸增长        | 极高，只为有效信息付费     |
| **后期工作量**  | 巨大，筛选过程极其痛苦       | 极小，几乎每张都是有效素材   |
| **最终成果质量** | 包含大量静止、无意义的“垃圾时间” | 节奏紧凑，聚焦于“变化”的精华 |

显然，我需要的是后者。一个真正懂得“什么时候该出手，什么时候该摸鱼”的、充满智慧的——聪明的懒汉。

## 给摄像头装上“大脑”：懒惰是第一生产力

于是，我决定对我的摄影系统进行一次彻底的、颠覆性的“智能化”升级。这次，我没有教它如何更努力地工作，恰恰相反，我教给了它一门艺术——如何合理地“偷懒”。

它的核心工作原理，就像一位经验老道、洞察敏锐的情报官，他从不屑于上报那些“一切正常”的乏味报告，而只在“有情况”时才发出电报。

为了让它具备这种高级的判断力，我为它设计了三步走的“智慧流程”：

### 视觉的纯化：看见本质，而非表象

清晨的冷光和傍晚的暖光，会给同一场景染上截然不同的色调，但物体本身可能纹丝未动。因此，系统在比较前，会先把彩色画面和存档照片都转换为只有黑白灰的“素描模式”（灰度化）。

### 变化的度量：为“不同”赋予权重

系统将两张黑白照片进行像素级的叠加比对，生成“变化地图”，并计算其中亮色区域占比，得出变化率百分比，用于衡量“发生了什么”。

### 决断的艺术：设定一条智慧的“偷懒”基准

我为它设定了一个阈值，例如 0.5%。低于此值则跳过拍摄，只有当变化显著时才记录，节省资源、聚焦重要。

## 生活中的贴心管家：一个高度自律的系统

为了让它能 7x24 小时稳定运行，我设计了以下几套机制：

### 量身定制的“生物钟”

根据家庭节奏设定不同频率的检测：

- **晨光捕捉 (6-8点)**：每 5 秒捕捉一次  
- **日间活跃 (8-18点)**：每 2 秒捕捉一次  
- **黄昏慢品 (18-22点)**：每 5 秒捕捉一次  
- **午夜巡航 (22-6点)**：每 10 秒捕捉一次  

### 深谋远虑的“空间魔法”

当存储使用接近 85% 时，系统自动删除最旧的存档，确保运行空间始终充足。

### 百折不挠的“生存本能”

面对断电、摄像头失联等异常，系统具备重连重试机制，最大程度自愈保持在线。

## 意外的收获：成为生活的静谧观察者

系统的运行成果，远超预期，它让我发现：

### 微缩的家庭日晷

追踪阳光在家中地板上的路径变化，像一个巨大的光影时钟。

### 植物的无声舞蹈

延时视频中能看见多肉转动身体朝向太阳，充满生命的对话。

### 窗外的流动风景

记录窗外云卷云舒、雪后屋顶融化的水滴落下，一切如诗如画。

## 创造的乐趣，在于过程本身

从想法萌芽到系统成熟，这个从 0 到 1 的过程带给我的满足感是难以言喻的。

技术的魅力不在于它多复杂，而在于我们如何运用它去理解和体验生活。

如果你也对创造充满热情，那就从一个微小的点子开始吧。真正的门槛，从不在工具，而在你那份愿意“折腾”的初心。

**开启你的创造之旅吧，去记录下属于你自己的、独一无二的时光故事。**
